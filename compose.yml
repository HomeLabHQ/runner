version: "3.8"
services:
  runner:
    container_name: github-action-runner
    build:
      context: ./
    deploy:
      mode: replicated
      replicas: 3
      placement:
        constraints:
          - node.role == worker
    env_file:
      - .env
    volumes:
      - /var/run/docker.sock:/home/docker/.docker/run/docker.sock:ro
    network_mode: host
